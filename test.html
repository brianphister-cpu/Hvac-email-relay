<!doctype html><meta name=viewport content="width=device-width,initial-scale=1">
<title>Relay Test</title>
<label>Endpoint</label><input id=ep value="https://hvac-email-relay.vercel.app/api/sendCsv">
<label>Shared Secret</label><input id=sec placeholder="Axpquvxp">
<label>Send To (email)</label><input id=to placeholder="Brianphister@gmail.com">
<button id=go>Send test email</button>
<pre id=out>Idle…</pre>
<script>
function b64(s){return btoa(unescape(encodeURIComponent(s)))}
document.getElementById('go').onclick=async ()=>{
  const ep=ep.value.trim(), sec=sec.value.trim(), to=to.value.trim();
  out.textContent='Sending…';
  const csv='a,b,c\n1,2,3\n4,5,6\n';
  try{
    const r=await fetch(ep,{method:'POST',headers:{'Content-Type':'application/json','x-secret':sec},
      body:JSON.stringify({to,subject:'HVAC Relay Test',body:'CSV attached from relay test.',filename:'test.csv',contentBase64:b64(csv)})});
    const t=await r.text(); out.textContent='Status '+r.status+': '+t; if(r.ok) alert('Email sent ✔');
  }catch(e){ out.textContent='Network error: '+(e.message||e); }
};
</script>